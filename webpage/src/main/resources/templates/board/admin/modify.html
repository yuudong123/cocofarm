<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <th:block th:replace="~{fragments/head :: headFragment}"></th:block>
    <link rel="stylesheet" href="/css/board/boardadminmodify.css" />
  </head>
  <body>
    <th:block th:replace="~{fragments/header :: headerFragment}"></th:block>
    <main>
      <div class="container">
        <div id="form">
          <input id="title" name="title" type="text" placeholder="제목" th:value="${board.title}" />
          <textarea id="content" class="materialize-textarea" name="content" placeholder="내용..." th:text="${board.content}"></textarea>
          <button id="btnFinish" class="btn">작성완료</button>
          <button id="btnCancel" class="btn red">취소</button>
        </div>
      </div>
    </main>
    <th:block th:replace="~{fragments/footer :: footerFragment}"></th:block>
  </body>
  <script th:inline="javascript">
    const btnFinish = document.querySelector("#btnFinish");
    const btnCancel = document.querySelector("#btnCancel");
    const category = document.querySelector("#category");
    const title = document.querySelector("#title");
    const content = document.querySelector("#content");
    const board_no = /*[[${board.board_no}]]*/ "";

    btnFinish.addEventListener("click", () => {
      fetchTEXT(
        "/admin/board/" + board_no + "/modify",
        {
          title: title.value,
          content: content.value,
        },
        (data) => {
          if (data == "success") {
            alert("수정되었습니다.");
            history.back();
          } else {
            alert("수정에 실패했습니다.");
          }
        }
      );
    });
    btnCancel.addEventListener("click", () => {
      if (confirm("작성한 내용은 저장되지 않습니다. 취소하시겠습니까?")) {
        history.back();
      }
    });
  </script>
</html>
